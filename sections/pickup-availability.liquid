{% comment %}theme-check-disable UndefinedObject{% endcomment %}
{%- assign pick_up_availabilities = product_variant.store_availabilities | where: 'pick_up_enabled', true -%}

{%- if pick_up_availabilities.size > 0 -%}
  <pickup-availability-preview class="pickup-availability-preview">
    {%- liquid
      assign closest_location = pick_up_availabilities.first
    -%}
    <div class="pickup-availability-info">
        <button
          id="ShowPickupAvailabilityDrawer"
          class="product-info-button pickup-availability-button link link--text"
          aria-haspopup="dialog"
        >
          {%- if pick_up_availabilities.size == 1 -%}
            {% render 'icon-i' %}
            {{ 'products.product.pickup_availability.view_store_info' | t }}
          {%- else -%}
            {{ 'products.product.pickup_availability.check_other_stores' | t }}
          {%- endif -%}
        </button>
    </div>
  </pickup-availability-preview>

  <pickup-availability-drawer
    class="drawer__inner"
    tabindex="-1"
    role="dialog"
    aria-modal="true"
    aria-labelledby="PickupAvailabilityHeading"
  >
    <div class="pickup-availability-header">
      <h2 class="h3 pickup-availability-drawer-title" id="PickupAvailabilityHeading">
        {{ 'products.product.pickup_availability.view_store_info' | t }}
      </h2>
      <button class="drawer__close pickup-availability-drawer-button" type="button" aria-label="{{ 'accessibility.close' | t }}">
        {%- render 'icon-close' -%}
      </button>
    </div>

    <div class="image">
      <img src="{{ 'image-pickup.jpg' | asset_url }}" alt="">
    </div>

    <ul class="pickup-availability-list list-unstyled" role="list" data-store-availability-drawer-content>
      {%- for availability in pick_up_availabilities -%}
        <li class="pickup-availability-list__item">
          <p class="pickup-availability-preview caption-large">
            {%- if availability.available -%}
              {% render 'icon-tick' %}
              {{ 'products.product.pickup_availability.pick_up_available' | t }}
            {%- endif -%}
          </p>
          <p>
            Our production studio is located in Hood River, Oregon. We don’t have a storefront. Customers who select local Hood River pickup will receive an email with pickup instructions.
          </p>
          <p>
            Though our studio isn’t generally open for browsing, we love to have open studios! <a href="#">Join our mailing list</a> to get notified about upcoming events.
          </p>
        </li>
      {%- endfor -%}
    </ul>
  </pickup-availability-drawer>
{%- endif -%}
